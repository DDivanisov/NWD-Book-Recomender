{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_PrevPageNext = _resolveComponent(\"PrevPageNext\");\n  const _component_BooksShow = _resolveComponent(\"BooksShow\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_PrevPageNext, {\n    currentPage: $setup.currentPage,\n    totalPages: $setup.totalPages,\n    onPageChange: $setup.getAllBooks\n  }, null, 8 /* PROPS */, [\"currentPage\", \"totalPages\", \"onPageChange\"]), _createVNode(_component_BooksShow, {\n    books: $setup.books,\n    loading: $setup.loading\n  }, null, 8 /* PROPS */, [\"books\", \"loading\"]), _createVNode(_component_PrevPageNext, {\n    currentPage: $setup.currentPage,\n    totalPages: $setup.totalPages,\n    onPageChange: $setup.getAllBooks\n  }, null, 8 /* PROPS */, [\"currentPage\", \"totalPages\", \"onPageChange\"])]);\n}","map":{"version":3,"names":["_createElementBlock","_createVNode","_component_PrevPageNext","currentPage","$setup","totalPages","onPageChange","getAllBooks","_component_BooksShow","books","loading"],"sources":["C:\\Users\\mynig\\VScodium\\Book-Recommender\\frontend\\src\\views\\BooksView.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <PrevPageNext\r\n        :currentPage=\"currentPage\"\r\n        :totalPages=\"totalPages\"\r\n        @pageChange=\"getAllBooks\"\r\n      />\r\n      <BooksShow\r\n        :books=\"books\"\r\n        :loading=\"loading\"\r\n      />\r\n      <PrevPageNext\r\n        :currentPage=\"currentPage\"\r\n        :totalPages=\"totalPages\"\r\n        @pageChange=\"getAllBooks\"\r\n      />\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { computed, onMounted, ref } from 'vue';\r\n  import { useStore } from 'vuex';\r\n  import PrevPageNext from '../components/PrevPageNext.vue';\r\n  import BooksShow from '../components/BooksShow.vue';\r\n  import services from '../../services/services.js';\r\n  \r\n  export default {\r\n    components: {\r\n      PrevPageNext,\r\n      BooksShow\r\n    },\r\n    setup() {\r\n      const store = useStore();\r\n      const books = ref([]);\r\n      const totalBooks = ref(0);\r\n      const totalPages = ref(0);\r\n      const loading = ref(true);\r\n      const limit = 15;\r\n      const currentPage = computed(() => store.state.currentPage);\r\n  \r\n      const getAllBooks = async (page) => {\r\n        store.dispatch('setPage', page);\r\n        loading.value = true;\r\n        try {\r\n          const response = await services.getBooks(page, limit);\r\n          if (response.status !== 200) throw new Error('Network response was not ok');\r\n          const data = response.data;\r\n          books.value = data.books;\r\n          totalBooks.value = data.totalBooks;\r\n          totalPages.value = data.totalPages;\r\n        } catch (error) {\r\n          console.error('Error fetching books:', error);\r\n        } finally {\r\n          loading.value = false;\r\n        }\r\n      };\r\n  \r\n      onMounted(() => {\r\n        getAllBooks(currentPage.value);\r\n      });\r\n  \r\n      return {\r\n        books,\r\n        totalBooks,\r\n        totalPages,\r\n        currentPage,\r\n        loading,\r\n        getAllBooks\r\n      };\r\n    }\r\n  };\r\n  </script>\r\n  \r\n  <style scoped lang=\"scss\">\r\n  </style>\r\n  "],"mappings":";;;;uBACIA,mBAAA,CAeM,cAdJC,YAAA,CAIEC,uBAAA;IAHCC,WAAW,EAAEC,MAAA,CAAAD,WAAW;IACxBE,UAAU,EAAED,MAAA,CAAAC,UAAU;IACtBC,YAAU,EAAEF,MAAA,CAAAG;0EAEfN,YAAA,CAGEO,oBAAA;IAFCC,KAAK,EAAEL,MAAA,CAAAK,KAAK;IACZC,OAAO,EAAEN,MAAA,CAAAM;iDAEZT,YAAA,CAIEC,uBAAA;IAHCC,WAAW,EAAEC,MAAA,CAAAD,WAAW;IACxBE,UAAU,EAAED,MAAA,CAAAC,UAAU;IACtBC,YAAU,EAAEF,MAAA,CAAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}