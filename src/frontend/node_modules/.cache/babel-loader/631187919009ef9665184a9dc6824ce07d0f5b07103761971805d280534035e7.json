{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"alert alert-warning\",\n  style: {\n    \"margin-top\": \"200px\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_FilterTab = _resolveComponent(\"FilterTab\");\n  const _component_BooksShow = _resolveComponent(\"BooksShow\");\n  const _component_PrevPageNext = _resolveComponent(\"PrevPageNext\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_FilterTab, {\n    onGenreSelected: $setup.filterBooksByGenre,\n    genre: $setup.genre\n  }, null, 8 /* PROPS */, [\"onGenreSelected\", \"genre\"]), $setup.loading == false && $setup.books.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, \"No books.\")) : _createCommentVNode(\"v-if\", true), _createVNode(_component_BooksShow, {\n    books: $setup.books,\n    loading: $setup.loading,\n    page: $setup.currentPage\n  }, null, 8 /* PROPS */, [\"books\", \"loading\", \"page\"]), _createVNode(_component_PrevPageNext, {\n    currentPage: $setup.currentPage,\n    totalPages: $setup.totalPages,\n    onPageChange: $setup.getAllBooks\n  }, null, 8 /* PROPS */, [\"currentPage\", \"totalPages\", \"onPageChange\"])]);\n}","map":{"version":3,"names":["key","class","style","_createElementBlock","_createVNode","_component_FilterTab","onGenreSelected","$setup","filterBooksByGenre","genre","loading","books","length","_hoisted_1","_createCommentVNode","_component_BooksShow","page","currentPage","_component_PrevPageNext","totalPages","onPageChange","getAllBooks"],"sources":["C:\\Users\\mynig\\VScodium\\NWD-Books-Recommender\\src\\frontend\\src\\views\\BooksView.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <FilterTab \r\n      @genreSelected=\"filterBooksByGenre\" \r\n      :genre=\"genre\"\r\n    />\r\n    <div v-if=\"loading == false && books.length === 0\" class=\"alert alert-warning\" style=\"margin-top: 200px;\">No books.</div>\r\n    <BooksShow\r\n      :books=\"books\"\r\n      :loading=\"loading\"\r\n      :page=\"currentPage\"\r\n    />\r\n    <PrevPageNext\r\n      :currentPage=\"currentPage\"\r\n      :totalPages=\"totalPages\"\r\n      @pageChange=\"getAllBooks\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, onMounted, ref } from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport PrevPageNext from '../components/PrevPageNext.vue';\r\nimport BooksShow from '../components/BooksShow.vue';\r\nimport FilterTab from '@/components/FilterTab.vue';\r\nimport services from '../../services/services.js';\r\n\r\nexport default {\r\n  components: {\r\n    PrevPageNext,\r\n    BooksShow,\r\n    FilterTab\r\n  },\r\n  setup() {\r\n    const store = useStore();\r\n    const books = ref([]);\r\n    const totalBooks = ref(0);\r\n    const totalPages = ref(0);\r\n    const loading = ref(true);\r\n    const limit = 15;\r\n    const currentPage = computed(() => store.state.currentPage);\r\n    const genre = computed(() => store.state.genre);\r\n\r\n    const getAllBooks = async (page, selectGenre) => {\r\n      const genreToUse = selectGenre || genre.value;\r\n      store.dispatch('setPage', page);\r\n      loading.value = true;\r\n      try {\r\n        console.log(genreToUse);\r\n        const response = await services.getBooks(page, limit, genreToUse);\r\n        if (response.status !== 200) throw new Error('Network response was not ok');\r\n        const data = response.data;\r\n        books.value = data.books;\r\n        totalBooks.value = data.totalBooks;\r\n        totalPages.value = data.totalPages;\r\n      } catch (error) {\r\n        console.error('Error fetching books:', error);\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    };\r\n\r\n    const filterBooksByGenre = (selectGenre) => {\r\n      store.dispatch('setGenre', selectGenre);\r\n      getAllBooks(1, selectGenre);\r\n    };\r\n\r\n    onMounted(() => {\r\n      getAllBooks(currentPage.value, genre.value);\r\n    });\r\n\r\n    return {\r\n      books,\r\n      totalBooks,\r\n      totalPages,\r\n      currentPage,\r\n      loading,\r\n      getAllBooks,\r\n      filterBooksByGenre,\r\n      genre\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n</style>\r\n"],"mappings":";;EAAAA,GAAA;EAMuDC,KAAK,EAAC,qBAAqB;EAACC,KAA0B,EAA1B;IAAA;EAAA;;;;;;uBALjFC,mBAAA,CAgBM,cAfJC,YAAA,CAGEC,oBAAA;IAFCC,eAAa,EAAEC,MAAA,CAAAC,kBAAkB;IACjCC,KAAK,EAAEF,MAAA,CAAAE;yDAECF,MAAA,CAAAG,OAAO,aAAaH,MAAA,CAAAI,KAAK,CAACC,MAAM,U,cAA3CT,mBAAA,CAAyH,OAAzHU,UAAyH,EAAf,WAAS,KANvHC,mBAAA,gBAOIV,YAAA,CAIEW,oBAAA;IAHCJ,KAAK,EAAEJ,MAAA,CAAAI,KAAK;IACZD,OAAO,EAAEH,MAAA,CAAAG,OAAO;IAChBM,IAAI,EAAET,MAAA,CAAAU;yDAETb,YAAA,CAIEc,uBAAA;IAHCD,WAAW,EAAEV,MAAA,CAAAU,WAAW;IACxBE,UAAU,EAAEZ,MAAA,CAAAY,UAAU;IACtBC,YAAU,EAAEb,MAAA,CAAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}